---
title: WDM 音频驱动程序简介
description: WDM 音频驱动程序简介
keywords:
- 音频筛选 WDK 音频，KS 筛选器的子集
- WDM 音频驱动程序 WDK，关于 WDM 音频驱动程序
- 音频驱动程序 WDK，关于音频驱动程序
- KS 筛选 WDK 音频，关于 KS 筛选器
- 筛选 WDK 音频、KS
- KS 引脚 WDK 音频
- KS 引脚 WDK 音频，关于 KS 引脚
- 固定 WDK 音频、KS
- 音频插孔
- 输出插针 WDK 音频
- 输入插针 WDK 音频
- 筛选器工厂 WDK 音频
- 固定工厂的 WDK 音频
- 内核流式处理 WDK 音频
- 筛选器图形 WDK 音频
- 扬声器 WDK 音频
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 3176c6f76f2b89403034e003ace2e0ae4f47b047
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96784709"
---
# <a name="introduction-to-wdm-audio-drivers"></a>WDM 音频驱动程序简介


## <span id="introduction_to_wdm_audio_drivers"></span><span id="INTRODUCTION_TO_WDM_AUDIO_DRIVERS"></span>


内核流式传输 (KS) 服务支持对音频和其他类型的连续媒体进行内核模式处理。 从概念上讲，当流沿包含一定数量处理节点的数据路径流动时，流将经历处理。 一组相关节点组合在一起形成一个 *KS 筛选器，该筛选器* 表示一个更不容易独立的流处理功能块。 可以通过将多个筛选器组合在一起以形成 *筛选器图*，以模块化方式构造更复杂的函数。

典型的音频适配器卡可能包含音频设备，用于通过一组扬声器播放波形流，将音频信号从麦克风转换为波形流，以及从 MIDI 流综合声音。 适配器驱动程序可以将其中的每个音频设备包装到它公开给操作系统的 KS 筛选器中。 操作系统将筛选器连接到其他筛选器，以形成代表应用程序处理音频流的窗体筛选器图。

KS 筛选器通过其 *pin* 连接在一起。 可以将音频过滤器上的 pin 视为音频插孔。 当客户端需要将数据流传入或传出筛选器时，客户端会在筛选器上实例化输入或输出插针。 在某些上下文中，可以互换使用术语 " *pin* " 和 " *流* "。

上游筛选器的输出插针连接到下游筛选器的输入插针。 输出插针中的数据流必须具有输入插针可以接受的数据格式。 通常需要使用数据缓冲来平滑输入插针产生数据的速率中的暂时不匹配，并使用输入插针。

KS 筛选器实现为内核模式驱动程序对象，该对象封装了一些相关的流处理函数。 可在软件或硬件中实现此功能。 在此模型中，可以将音频适配器视为硬件设备的集合，适配器驱动程序会将其中的每个设备作为单个筛选器公开给音频系统。

适配器驱动程序向音频系统公开 *筛选器工厂* 的集合。 每个筛选器工厂都能够实例化特定类型的筛选器：

-   如果适配器包含一个或多个在功能上相同或相同的设备，驱动程序会将这些设备的筛选器组合在同一筛选器工厂中。

-   如果适配器包含多种不同类型的设备，这些设备将通过几个不同的筛选器工厂进行呈现。

KS 筛选器向音频系统公开 *pin 工厂* 的集合。 每个 pin 工厂都能够实例化特定类型的 pin。 如果筛选器可以提供一个或多个与函数中的类似或相同的 pin，则筛选器会将这些 pin 组合到同一个 pin 工厂中。 例如，执行音频混合的筛选器可能有一个可以实例化单个输出插针的 pin 工厂，另一个可以实例化多个输入插针的 pin 工厂。

KS 服务建立在 Windows 驱动模型的基础之上。 请注意，术语 *KS 筛选器* 必须与术语筛选器 *驱动程序* 区分开来，后者是另一个 WDM 概念。 筛选器驱动程序位于 WDM 驱动程序堆栈中，可以通过堆栈 (Irp) 来截获和修改 i/o 请求数据包。 高级别和低级别筛选器驱动程序分别驻留在函数驱动程序的上方和下方。 在本部分中，术语 " *筛选* 器" 是指使用 KS 筛选器，而不是筛选器驱动程序，除非另有说明。 有关筛选器驱动程序的详细信息，请参阅 [WDM 驱动程序的类型](../kernel/types-of-wdm-drivers.md)。

本节包含下列主题：

[WDM 音频驱动程序的基本功能](basic-functions-of-a-wdm-audio-driver.md)

[供应商音频驱动程序选项](vendor-audio-driver-options.md)

[WDM 音频术语](wdm-audio-terminology.md)

[示例音频驱动程序](sample-audio-drivers.md)

[KsStudio 实用程序](ksstudio-utility.md)

有关 WDM 音频体系结构的新功能的更新和信息，请参阅 [音频技术](./index.md) 网站。

 

