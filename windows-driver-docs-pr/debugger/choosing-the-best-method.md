---
title: 选择最佳方法
description: 选择最佳方法
ms.date: 11/28/2017
ms.localizationpriority: medium
ms.openlocfilehash: 60938185c3f8e4aac074ced9a259beafb60ba64e
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96821608"
---
# <a name="choosing-the-best-method"></a>选择最佳方法


调试服务应用程序的方法有多种。 为了选择正确的方法，您必须首先进行两个选择：调试器附加到服务应用程序的时间和要使用的调试配置。

调试器可以附加到服务应用程序的三个阶段：

-   服务启动的最开始。 当服务开始时，调试器会自动启动。 如果要调试服务的初始化代码，请选择此选项。

-   服务第一次遇到异常时。 如果发生异常或崩溃，或者服务应用程序调用 **DebugBreak** 函数，则会自动启动调试器。 如果希望在遇到问题时显示调试器，则选择此选项。

-   服务正常运行后。 您可以手动将调试器附加到已在运行的服务。 如果您不希望进行调试的高级准备，请选择此选项。

可以选择三种调试配置：

-   本地调试。 单个调试器，在服务所在的同一台计算机上运行。

-   远程调试。 在服务所在的同一台计算机上运行的调试服务器，通过在另一台计算机上运行的调试客户端进行控制。

-   内核控制的用户模式调试。 在服务所在的同一台计算机上运行的用户模式调试器，从另一台计算机上的内核调试器进行控制。

如果你的服务在 Windows 2000、Windows XP 或 Windows Server 2003 上运行，则可以将这三个附加选项中的任何一个与这三个调试配置选项组合在一起。

如果你的服务在 Windows Vista 或更高版本的 Windows 上运行，则可以对这些选择的组合进行一种限制。 如果要从服务启动开始，或从遇到异常的时间进行调试，则必须使用远程调试或内核控制的用户模式调试。

换句话说，在 Windows Vista 和更高版本中，除非你计划在服务已运行之后手动附加调试器，否则不能使用本地调试。 此限制的原因在于，在这些版本的 Windows 中，服务在会话0中运行，任何自动启动并附加到服务的调试器也都在会话0中，并且在运行该服务的计算机上没有用户界面。

 

 





