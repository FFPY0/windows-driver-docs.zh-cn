---
title: 已检验版本和免费版本的差异
description: 基于 NT 的操作系统有两个不同的版本，可免费 (零售) 并检查 (调试) 。 还有第三个选项（称为部分检查的生成），它将两个元素组合在一起。
keywords:
- checked build WDK，与免费版本
- 免费生成 WDK
- 零售版本 WDK
ms.date: 05/08/2020
ms.localizationpriority: medium
ms.openlocfilehash: 946d83a5358ee7a91b509c834bfb334577665fbf
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96826131"
---
# <a name="checked-and-free-build-differences"></a>已检验版本和免费版本的差异

提供了两个不同的基于 NT 的操作系统版本：免费 (零售) 并检查 (调试) 。 还有第三个选项（ *称为部分检查的生成*），它将两个元素组合在一起。

> [!NOTE]
> 在 Windows 10 版本1803之前，已检查的生成在较早版本的 Windows 上可用。
> 使用驱动程序验证程序和 GFlags 等工具在更高版本的 Windows 中检查驱动程序代码。

## <a name="differences-between-the-checked-and-free-builds"></a>已检查和免费生成之间的差异

本节列出了生成选项之间的一些差异。

**免费生成 (或零售版本)**  
在生产环境中使用 Microsoft Windows 的免费版本。 操作系统的免费版本是用完全编译器优化生成的。 当免费版本发现可纠正的问题时，它将继续运行。

包含操作系统的免费版本的分发媒体没有任何特殊标签，换言之，包含免费版本的 CD 或下载标记有 Windows 版本名称，没有任何版本的版本的任何引用。

**检查的生成 (或调试版本)**  
Microsoft Windows 的检查内部版本可让你更轻松地识别和诊断操作系统级问题。

检查的生成与免费生成在以下方面有所不同：

- 许多编译器优化 (例如，在选中的内部禁用了堆栈帧消除) 。 这样可以更轻松地了解拆装的机器说明，因此更容易跟踪系统软件问题的原因。

- 选中的生成在操作系统代码和系统提供的驱动程序中启用大量的调试检查。 这可帮助选中的生成在发生内部不一致和问题时立即识别它们。

**部分检查的生成 (或部分调试版本)**  
Microsoft Windows 的部分检查的内部版本与完整检查的版本类似。 主要区别在于部分检查的生成仅包括 (内核) 的已检查操作系统映像和 (HAL) 的检查的硬件抽象层。 Windows 组件的其余部分来自免费的 (零售) Windows 版本。

部分检查的生成与免费和完整检查的生成的不同之处在于：

- 与完整检查的内部版本一样，许多编译器优化 (如堆栈帧消除) 已禁用。 这样就可以更轻松地了解拆装的机器说明，因此更容易跟踪问题的原因。

- 部分检查的生成在操作系统代码和 HAL 中启用了许多调试检查。 但系统提供的驱动程序来自免费的 (零售) 版本，因此除非你显式安装了系统提供的驱动程序的已检查版本，否则，你不会获得完整的已检查版本的其他优势来识别和调试问题。

- 部分检查的生成要求您首先安装 Windows 的完整免费 (零售) 版本。 使用启动选项，你可以将计算机配置为在启动时加载已检查或可用的组件。 然后，你可以使用一台计算机通过 Windows 的已检查和免费版本来测试驱动程序。

## <a name="where-to-find-a-checked-build-of-windows"></a>在何处可以找到 Windows 的已检查版本

包含选中版本的下载和分发媒体清楚地标记为 "调试/选中生成"。 所选的生成下载包含操作系统的已检查版本，以及所选版本的 Hal、驱动程序、文件系统，甚至许多用户模式组件。 有关获取选中并部分检查的生成的信息，请参阅 [安装检查的生成](installing-the-checked-build.md)。 为方便起见，在 windows 驱动程序工具包的/debug 目录中提供了所选版本的内核和 HAL， (从用于 Windows Vista) 的 WDK 开始。

## <a name="when-to-use-the-checked-build-or-partial-checked-build"></a>何时使用选中的生成或部分选中的生成

需要测试驱动程序时，应始终在开发过程中的某个时间点使用检查的生成。 检查的生成会在驱动程序与操作系统交互的方式中公开问题。 如果未测试您的驱动程序是否能够在检查的内部版本中运行，则不会将测试视为已完成。

由于检查的生成包含的优化和调试检查比免费生成更少，因此检查后的生成的大小和运行时间比免费版本慢。 因此，免费生成在生产环境中使用，除非需要使用 checked 生成来确定严重的问题。

作为完整检查版本的替代方法，你可以将计算机配置为使用部分检查的生成。 这为你提供了用于调试的检查生成的优点，以及免费生成的更好性能。 有关将计算机配置为部分检查的版本的信息，请参阅 [仅安装适用于 Windows Vista 和更高版本的已检查操作系统和 HAL () ](installing-just-the-checked-operating-system-and-hal--for-windows-vist.md)。

若要在使用部分检查的生成时对驱动程序进行更全面的测试，还应考虑安装所选的相关系统驱动程序的版本。 例如，如果要开发较低的磁盘筛选器驱动程序，应考虑从完整的已检查版本提取并安装 Disk.sys 的检查内部版本和 Storport.sys。

若要验证是否正在运行 "检查生成"，请按照 **步骤 4-** 在 [Windows Vista 和更高版本中安装仅安装已检查操作系统和 HAL (](installing-just-the-checked-operating-system-and-hal--for-windows-vist.md)中的说明进行操作) 
