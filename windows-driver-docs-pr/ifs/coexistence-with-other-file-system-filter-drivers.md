---
title: 与其他文件系统筛选器驱动程序共存
description: 与其他文件系统筛选器驱动程序共存
keywords:
- 安全 WDK 文件系统、共存
- 共存 WDK 文件系统
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: c5a187906782fb616f62c7443037ff93d180abd0
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96838793"
---
# <a name="coexistence-with-other-file-system-filter-drivers"></a>与其他文件系统筛选器驱动程序共存


## <span id="ddk_coexistence_with_other_file_system_filter_drivers_if"></span><span id="DDK_COEXISTENCE_WITH_OTHER_FILE_SYSTEM_FILTER_DRIVERS_IF"></span>


文件系统筛选器驱动程序必须正确处理的最精确性受损的问题之一是与其他筛选器驱动程序共存。 构建文件系统筛选器驱动程序以与其他文件系统筛选器驱动程序共存时，最好考虑以下问题：

-   筛选器驱动程序必须考虑其操作中是否存在其他筛选器驱动程序。 筛选器驱动程序执行的任何操作都应该足够强大，可以使用相同或不同的技术作为附加筛选器驱动程序。

-   筛选器驱动程序可能会通过更改系统的基本行为来影响其他筛选器的行为。

-   增加筛选器驱动程序数量会增加稀有资源的消耗，特别是堆栈空间。 文件系统筛选器驱动程序必须努力最大限度地减少对这些资源的使用。 否则，恶意用户应用程序可以利用此类漏洞来导致系统出现故障。 开发人员应特别注意完成路径和错误路径。

-   筛选器驱动程序在发送到低级驱动程序 (筛选器驱动程序或文件系统) 的内容时应保守些，并应在接受的内容中自由。 筛选器驱动程序应尽可能地确保它们发送到基础驱动程序的操作很简单，不复杂 (在创建操作期间不执行重命名操作，例如) 。

-   筛选器驱动程序必须小心锁定。 永远不能跨文件系统调用持有锁。 系统的各种组件对锁定顺序以及可以或不能阻止的函数做出非常精确和明确的假设。 通过添加另一个锁定层来干扰这一点，很容易导致死锁。 源自 Srv.sys 的 i/o 会更快速地公开这些问题，但也可以在正常压力测试过程中看到它们。

任何文件系统筛选器驱动程序开发人员都必须设计和实现才能与其他筛选器驱动程序完全共存，但也需要测试其他筛选器驱动程序的筛选器驱动程序，以确保该驱动程序不会在系统中引入安全问题。

 

 




