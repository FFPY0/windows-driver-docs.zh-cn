---
title: 基于文件和基于页文件的节
description: 基于文件和基于页文件的节
keywords:
- 文件支持部分 WDK 内核
- 页面文件支持部分 WDK 内核
- 支持的内存部分 WDK 内核
- 页面文件备份 WDK 内核
- 暂时共享数据 WDK 内核
- 永久共享数据 WDK 内核
- 内存段 WDK 内核
- 节对象 WDK 内核
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: 49acec53a67873391297a4e4917d3fd7880fd463
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96790525"
---
# <a name="file-backed-and-page-file-backed-sections"></a>基于文件和基于页文件的节





所有内存部分都支持 ( "受支持" ) ，这些磁盘文件可以包含（临时或永久）要共享的数据。

当你创建一个节时，可以标识该节将支持的特定数据文件。 此类节称为 " *文件支持* " 部分。

如果你不确定某一后备文件，则该部分由系统的分页文件支持，该节称为 *支持页面文件* 的部分。 可以将支持文件的部分中的数据永久写入磁盘。 页面文件中的数据不会永久地写入磁盘。

*文件支持* 部分反映磁盘上实际文件的内容;换句话说，它是一个内存映射文件。 对指定的文件支持节中的内存位置的任何访问都对应于对关联文件中的位置的访问。

如果进程将视图映射为只读，则从该视图读取的任何数据都将以透明方式从文件读取。 同样，如果进程将视图映射为读/写，则从视图中读取或写入视图的所有数据都将以透明方式从文件读取或写入到文件。 在这两种情况下，视图的虚拟内存不会使用页面文件中的任何空间。

还可以将支持文件的部分映射为写入时复制。 在这种情况下，视图的数据从文件中读取，但写入视图的任何数据都不会写入文件;相反，它将在未映射最后一个视图并且关闭该部分的最后一个句柄之后被丢弃。

页面文件（而不是磁盘上的任何显式文件）支持页面文件备份部分。 销毁节对象后，将自动丢弃对支持页面文件的节所做的任何更改。 页文件支持的节可用作两个进程之间的共享内存段。

可以在两个进程之间共享任何部分（文件备份）。 相同的物理内存地址范围映射到每个进程中的虚拟内存地址范围 (但不一定要) 同一虚拟地址。

 

 




