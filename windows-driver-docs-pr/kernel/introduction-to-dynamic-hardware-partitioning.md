---
title: 动态硬件分区简介
description: 动态硬件分区简介
ms.assetid: 0d909c64-17c4-4f0e-85b7-4e0a6a92eeee
keywords:
- 动态硬件分区 WDK，关于动态硬件分区
- 硬件分区 WDK 动态，关于动态硬件分区
- 对 WDK 动态硬件分区，关于动态硬件分区
- 硬件分区服务器 WDK
- 分区单位 WDK 动态硬件分区
- 静态分区服务器 WDK 动态硬件分区
- 动态分区服务器 WDK 动态硬件分区
- 热添加 WDK 动态硬件分区
- 热删除 WDK 动态硬件分区
- 热替换 WDK 动态硬件分区
- 服务器 WDK 动态硬件分区
- 硬件分区 WDK
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: 5e8ac761d201f38fdf783cf77a6965359bf70c80
ms.sourcegitcommit: 8739f3683432345092305565815baa68c82bef43
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/02/2020
ms.locfileid: "96482562"
---
# <a name="introduction-to-dynamic-hardware-partitioning"></a>动态硬件分区简介

在服务器运行时更改服务器的硬件配置称为 *动态硬件分区*。 如果要在支持动态硬件分区的服务器上运行设备驱动程序，则驱动程序必须支持对服务器的硬件配置进行动态更改。

*硬件分区服务器* 是一种可以配置为一个或多个独立 *硬件分区* 的服务器。 每个硬件分区都运行一个独立的操作系统实例。 你可以将每个服务器的每个硬件资源分配给适用于服务器应用程序的任何配置中的每个硬件分区。 分配给特定硬件分区的硬件资源与服务器中的其他硬件分区相隔离。

硬件分区由一个或多个 *分区单位* 组成。 分区单位是可以分配给硬件分区的硬件的最小单位。 分区单位可以是处理器、内存模块或 i/o 主机桥。 通常，处理器和内存模块插入到可以独立打开或关闭的插槽中。

硬件分区服务器可以是以下两种类型之一： *静态分区* 或 *动态分区*。 在静态分区服务器上，在服务器运行时，不能更改分配给每个硬件分区的分区单位的配置。 若要更改配置，则必须关闭并重新启动服务器计算机。 Microsoft Windows Server 2000 和更高版本的 Windows Server 操作系统支持静态分区服务器。

在动态分区的服务器上，你可以在服务器运行时更改分配给每个硬件分区的分区单位的配置。 这称为 *动态硬件分区*。 如果硬件分区上运行的操作系统支持动态硬件分区，则可以添加、替换或删除分区单位，而无需重新启动操作系统。 根据操作系统的功能，您可以执行以下一项或多项动态硬件分区操作：

<a href="" id="hot-add"></a>*热添加*  
向正在运行的硬件分区添加分区单元。

<a href="" id="hot-remove"></a>*热删除*  
从正在运行的硬件分区中删除分区单元。

<a href="" id="hot-replace"></a>*热替换*  
使用服务器计算机中已有的替换分区单位替换相同的分区单位。 热替换操作是一种独立于热删除操作的操作，后跟热添加操作。

Windows Server 2003 Service Pack 1 (SP1) 支持对基于 x86、基于 x64 和基于 Itanium 的服务器上的内存模块进行热添加操作。 Windows Server 2003 SP1 不支持热删除或热替换操作。

从 Windows Server 2008 开始，操作系统支持处理器、内存模块和 i/o 主机桥的热添加操作，以及基于 x64 和基于 Itanium 的服务器计算机上的处理器和内存模块的热替换操作。 操作系统还支持对基于 x86 的服务器计算机上的内存模块进行热添加操作。 操作系统不支持热删除操作。

下表总结了每个版本的 Windows Server 中包含的动态硬件分区支持。

<table>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>带有 SP1 的 Windows Server 2003</th>
<th>Windows Server 2008 和更高版本的基于 x86 的服务器上的 Windows Server</th>
<th>基于 x64 和基于 Itanium 的服务器上的 windows server 2008 及更高版本的 Windows Server</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>热添加</p></td>
<td><p>内存模块</p></td>
<td><p>内存模块</p></td>
<td>处理器、内存模块、i/o 主机桥</td>
</tr>
<tr class="even">
<td><p>热删除</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td><p>热替换</p></td>
<td></td>
<td></td>
<td>处理器、内存模块</td>
</tr>
</tbody>
</table>

 

建议你在开发设备驱动程序时考虑以下准则：

-   你应该了解动态硬件分区，因为有关服务器计算机的硬件配置的某些假设在动态分区服务器上无效。 如果设备驱动程序未设计为容纳动态硬件分区，则可能会导致数据损坏，或者导致操作系统生成 bug 检查（如果它们在动态分区服务器上运行）。

-   你应该考虑为动态硬件分区标识的 [关键问题](changes-to-the-number-of-processors.md) ，即使你不是为服务器计算机开发设备驱动程序。

-   应查看并更新为运行 Windows Server 2008 和更高版本的 Windows Server 的服务器开发的所有设备驱动程序。 设备驱动程序可以向操作系统注册，以接收有关硬件配置的更改的通知。 当设备驱动程序被通知有关硬件配置的更改时，他们可以根据需要对更改做出响应，以实现安全和最佳操作。 这可确保驱动程序在动态分区的服务器上正常运行。

你为 Windows XP 和更高版本的 Windows 开发的驱动程序，这些驱动程序可以正确地参与 [资源重新平衡](stopping-a-device-to-rebalance-resources.md) ，而且不会对处理器、处理器关联掩码或物理内存量作出任何假设，而是会在动态分区的服务器上继续正常运行。

大多数现有的用户模式应用程序应继续在动态分区的服务器上运行，而无需进行任何修改。 但是，如果应用程序为每个处理器分配线程或执行基于可用物理内存量的内存分配，则该应用程序可以向操作系统注册，以获得对硬件配置的更改的通知。 当应用程序收到有关硬件配置的更改的通知时，它可以相应地调整其资源分配。

 

 




