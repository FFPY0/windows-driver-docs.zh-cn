---
title: 基于对象
description: 基于对象
keywords:
- 基于对象的驱动程序 WDK 内核
- 对象不透明度 WDK 内核
- 不透明 WDK 内核
ms.date: 06/16/2017
ms.localizationpriority: medium
ms.openlocfilehash: da7abb9700013ad2875910eac45ab85552690a75
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96838261"
---
# <a name="object-based"></a>基于对象





基于 Microsoft Windows NT 的操作系统基于对象。 执行组件中的各种组件都定义了一个或多个对象类型。 每个组件都导出操作其对象类型的实例的内核模式支持例程。 组件不能直接访问另一个组件的对象。 若要使用另一个组件的对象，组件必须调用导出的支持例程。

此设计允许操作系统既是可移植的，也是灵活的。 例如，操作系统的未来版本可能包含重新编码内核组件，该组件定义相同的对象类型，但内部结构完全不同。 如果此假设重新编码版本的内核导出了一组与现有系统具有相同名称和参数的支持例程，则内部更改不会影响现有系统中的任何其他执行组件。

同样，若要保持可移植性和可配置性，驱动程序必须仅使用支持例程和在 WDK 中介绍的其他接口与操作系统进行通信。

与操作系统一样，驱动程序也是基于对象的。 例如：

-   *文件对象* 表示用户模式应用程序与设备的连接。

-   *设备对象* 表示每个驱动程序的逻辑、虚拟或物理设备。

-   *驱动程序对象* 表示每个驱动程序的加载映像。

I/o 管理器定义文件对象、设备对象和驱动程序对象的结构和接口。

与任何其他执行组件一样，驱动程序通过调用 i/o 管理器和其他系统组件导出的内核模式支持例程来使用对象。 内核模式支持例程通常具有标识每个例程操作的特定对象的名称，以及每个例程在该对象上执行的操作。 这些支持例程的名称如下所示：

*PrefixOperationObject*

where

*前缀* 标识用于导出支持例程的内核模式组件，通常为定义该对象类型的组件。 大多数前缀有两个字母。

*操作* 描述对对象执行的操作。

*对象* 标识对象的类型。

例如，i/o 管理器的 [**IoCreateDevice**](/windows-hardware/drivers/ddi/wdm/nf-wdm-iocreatedevice) 例程创建设备对象，以将物理、逻辑或虚拟设备表示为 i/o 请求的目标。

一个系统组件可以导出调用另一个组件的支持例程的例程。 这可以减少驱动程序必须进行的调用数。 特别是，i/o 管理器会导出某些例程，使开发驱动程序更容易。 例如， [**IoConnectInterruptEx**](/windows-hardware/drivers/ddi/wdm/nf-wdm-ioconnectinterruptex)，哪个最低级别驱动程序调用来注册其 *isr*，为 *中断对象* 调用内核支持例程。

### <a name="object-opacity"></a><a href="" id="ddk-object-opacity-kg"></a>对象不透明度

某些系统定义的对象不 *透明*：只有定义系统组件能识别此类对象的内部结构，并可以直接访问对象包含的所有数据。 定义不透明对象的系统组件会导出支持例程，驱动程序和其他内核模式组件可以调用这些例程来处理该对象。 驱动程序永远不会直接访问不透明的对象结构。

**注意**   为了保持驱动程序的可移植性，驱动程序必须使用系统提供的支持例程来处理系统定义的对象。 定义系统组件可以随时更改其对象类型的内部结构。

 

