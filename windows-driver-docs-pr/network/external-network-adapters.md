---
title: 外部网络适配器
description: 外部网络适配器
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 05fd0608560916e92b9463eea7f20815ecde54e3
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96838847"
---
# <a name="external-network-adapters"></a>外部网络适配器


外部网络适配器在 Hyper-v 父分区中运行的管理操作系统中公开。 外部网络适配器提供与 Hyper-v 外部网络的连接。 此网络通过主机的物理网络接口转发数据包流量。

通过 Hyper-v 父分区和所有连接到可扩展交换机的子分区来访问外部网络。 可扩展交换机的每个实例都不支持多个外部网络适配器连接。

外部网络适配器是主机上基础物理网络适配器的虚拟表示。 外部网络适配器将数据包、对象标识符 (Oid) 请求，并将 NDIS 状态指示转发到一个或多个基础物理网络适配器。

在内部，外部网络适配器绑定到基础物理网络适配器的各种配置。 其中每个配置通过一个或多个物理网络适配器，提供对外部网络接口的访问。 有关这些物理适配器配置的详细信息，请参阅 [物理网络适配器配置的类型](types-of-physical-network-adapter-configurations.md)。

如果将可扩展交换机配置为提供外部网络适配器连接，请在启动交换机时执行以下步骤：

1.  可扩展交换机的协议边缘 (OID 发出对象标识符) 设置 [oid \_ 交换机 \_ 端口 \_ 创建](./oid-switch-port-create.md) 可扩展交换机驱动程序堆栈的请求。 此 OID 请求通知底层的可扩展交换机扩展：正在为外部网络适配器创建端口。

2.  可扩展交换机的协议边缘发出 oid [ \_ 交换机 \_ NIC \_ ](./oid-switch-port-create.md) 的 oid 集请求，并按可扩展交换机驱动程序堆栈进行创建。 此 OID 请求通知底层的可扩展交换机扩展：正在为之前创建的端口创建外部网络适配器的网络连接。

3.  可扩展交换机的协议边缘发出 oid [ \_ 交换机 \_ NIC \_ ](./oid-switch-port-create.md) 的 oid 集请求，并沿可扩展交换机驱动程序堆栈向下连接。 此 OID 请求通知底层的可扩展交换机扩展，外部网络适配器的网络连接已连接并且可操作。 此时，扩展可以检查、注入和转发数据包到连接到外部网络适配器的端口。

当具有外部网络适配器连接的可扩展交换机停止时，将执行以下步骤：

1.  可扩展交换机的协议边缘发出 oid 交换机 NIC 的 OID 集请求断开可扩展交换机驱动程序堆栈的 [ \_ \_ \_ 连接](./oid-switch-nic-disconnect.md) 。 此 OID 请求通知底层的可扩展交换机扩展，指出与外部网络适配器的连接被破坏。

2.  在所有针对网络连接的数据包流量和 OID 请求都完成之后，可扩展交换机的协议边缘会发出 oid [ \_ 交换机 \_ NIC \_ ](./oid-switch-port-create.md) 的 oid 设置请求。 此 OID 请求通知底层的可扩展交换机扩展已正确地断开和删除与外部网络适配器的连接。

3.  可扩展交换机的协议边缘发出 oid [ \_ 交换机 \_ 端口 \_ 拆卸](./oid-switch-port-teardown.md) 的 oid 集请求，并向下扩展交换机驱动程序堆栈。 此 OID 请求通知底层的可扩展交换机扩展，此端口用于外部网络适配器连接。

4.  可扩展交换机的协议边缘向下扩展了 oid [ \_ 交换机 \_ 端口 \_ 删除](./oid-switch-port-delete.md) 扩展交换机驱动程序堆栈的请求。 此 OID 请求通知底层的可扩展交换机扩展已断开并删除用于外部网络适配器连接的端口。

 

