---
title: 验证端口
description: 验证端口
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 86316c44f9f3ad7d13df4075d630b26b1ee2d79a
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96808019"
---
# <a name="validation-ports"></a>验证端口


从 Windows Server 2012 中的 NDIS 6.30 开始，可扩展交换机接口创建一个可用于承载可扩展交换机网络适配器连接的操作端口。 在某些情况下，可扩展交换机接口会在为 Hyper-v 子分区创建操作端口之前创建验证端口。 验证端口用于验证和验证将连接到 (VM) 子分区网络适配器的可扩展交换机虚拟机的操作端口的设置。

**注意**  在 Hyper-v 中，子分区也称为 VM。

 

在以下条件下创建此验证端口：

-   首先创建 VM。 VM 开机后，将删除验证端口，并在其位置创建操作端口。

-   VM 进入已保存状态。 当恢复并打开 VM 时，将删除验证端口，并在其位置创建操作端口。

    有关详细信息，请参阅 [Hyper-v 可扩展交换机保存和还原操作](hyper-v-extensible-switch-save-and-restore-operations.md)。

-   VM 已停止并关闭。 VM 开机后，将删除验证端口，并在其位置创建操作端口。

-   正在将 VM 实时迁移到另一台主计算机。 在新的主机计算机上创建并打开 VM 后，将删除验证端口，并在其位置创建操作端口。

在创建验证端口之后，可扩展交换机接口会发出 OID 请求，以下载端口的端口策略。 由于这些端口是为策略验证和验证创建的，例如，当首次配置 VM 时，所发生的验证适用于配置时间而不是运行时。 扩展应为这些端口执行以下类型的策略验证：

-   语法验证。 如果值格式不正确，此验证将失败。

-   范围验证。 如果设置不符合所需的最小值和最大值的范围，此验证将失败。

-   适用性验证。 如果设置不适用于可扩展交换机，此验证将失败。 例如，定义外部网络服务级别协议的策略配置文件 (SLA) 不适用于无法访问外部网络接口的可扩展交换机。

-   冲突检测。 如果设置与已在同一端口上设置的其他设置发生冲突，则验证失败。

当可扩展交换机扩展为验证端口验证端口和策略设置时，必须遵循以下准则：

-   由于验证端口是临时的，因此扩展不得验证和失败无法通过可扩展交换机当前满足的策略和配置设置。

    例如，支持最多10千兆位带宽的可扩展交换机当前目前只有1千兆千兆字节可供预留。 此扩展不会验证保留超过1千兆比特带宽的端口属性的验证。 创建操作端口时，应改为执行这种验证。 这是因为要验证的设置仍可能应用到带宽可用的操作端口。 这允许系统管理员在不受运行时约束限制的情况下最初配置 Vm。

-   扩展不得为验证端口分配或保留资源。 例如，验证端口上的带宽保留设置不应从可扩展交换机的可用带宽中扣减。 只有在创建操作端口时才应进行保留。

有关可扩展交换机操作端口的详细信息，请参阅 [操作端口](operational-ports.md)。

 

 





