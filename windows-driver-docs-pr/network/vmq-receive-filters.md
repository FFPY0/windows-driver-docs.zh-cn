---
title: VMQ 接收筛选器
description: VMQ 接收筛选器
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 3c4fb625dcd641b1e6e97f8b343e1413a6315bea
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96805125"
---
# <a name="vmq-receive-filters"></a>VMQ 接收筛选器





网络虚拟服务提供程序 (VSP) 在 VMQ 接收队列上设置 VMQ 接收筛选器。 此类筛选器包括一组网络标头字段测试。 网络适配器硬件对传入数据包中的标头字段执行这些测试，以确定数据包的接收队列分配。 队列上设置的每个筛选器都具有网络适配器的唯一筛选器标识符。 也就是说，筛选器标识符不会复制到网络适配器管理的不同队列。

VMQ 接口使用筛选器测试 (MAC) 标头中的媒体访问控制中的字段。 在 MAC 标头内，VMQ 筛选器测试使用虚拟局域网 (VLAN) 标识符和目标 MAC 地址字段。

可以在接收筛选器中指定多个字段测试。 所有测试都必须通过，才能匹配筛选器的条件并将数据包分配给接收队列。 VMQ 筛选器对等于指定值的字段进行测试。 例如，目标 MAC 地址等于指定地址。

可以在接收队列中设置多个筛选器。 如果队列中的任何筛选器匹配 (即，则将该筛选器的所有测试) 传递到该接收队列。

下图显示了如何执行筛选器测试以及筛选器如何确定队列分配。

![说明如何执行筛选器测试以及筛选器如何确定队列分配的关系图](images/vmqfilter.png)

在上图中，与 A 和 B) 相比， (测试 (DA) 的目标地址。 此外， (与2和 3) 相比，将对 VLAN 标识符进行测试。 和操作说明，DA 和 VLAN 标识符必须等于指定的值才能具有筛选器匹配项。 或操作阐明了队列上的任何筛选器，这些筛选器与将网络数据包分配给该队列的结果相匹配。

下图显示了筛选器和队列如何影响接收数据流。

![说明筛选器和队列如何影响接收数据流的关系图](images/vmqfilterpaths.png)

如果传入数据包与队列中的筛选器匹配，则会将其分配给该队列。 否则，将根据下一个队列中的筛选器对数据包进行测试。 如果任何队列上都没有筛选器匹配项，网络适配器会将数据包分配给默认队列。

 

 





