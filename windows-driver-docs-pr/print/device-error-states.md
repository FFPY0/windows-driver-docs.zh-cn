---
title: 设备错误状态
description: 设备错误状态
keywords:
- 错误状态 WDK 打印机
- 打印机错误状态 WDK
- 状态 WDK 打印机
- 脱机状态 WDK 打印机
- 热插拔总线 WDK 打印机
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: 6a994555c6bbb1a186a71d3da9672b3185da58e8
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96797269"
---
# <a name="device-error-states"></a>设备错误状态


打印设备及其驱动程序应从用户可能遇到的任何错误状态正常恢复。 它与测试所有设备可能的错误状态相关。 确保设备向用户通知每个错误状态，并且设备取消操作、恢复和从每个错误状态重启。 首先设置错误状态，然后验证用户是否收到了正确的错误状态。

常见的打印机错误状态包括：

-   **缺纸**

-   **打印门打开**

-   **缺墨**

-   **卡纸**

-   **脱机**

-   **热插拔总线错误**

在打印作业操作前后测试这些错误状态中的每一个错误状态，步骤如下：

1.  设置错误状态，然后发送打印作业。

2.  验证是否可以取消、恢复和重新启动该作业。

3.  设置在打印作业期间发生的错误状态，然后再次验证是否可以取消、恢复和重新启动该作业。

还应为脱机和热插拔错误状态执行以下附加测试步骤：

-   **脱机**
    -   当打印机进入脱机状态时，验证打印作业是否保留在作业队列中，直到设备准备好进行打印。 然后，该作业应成功完成。
    -   在打印作业期间和之前，拔下打印机的电源。 确认打印机重新获取该域作业队列并再次开始打印。 请参阅 [电源管理](power-management.md)中的更多详细信息。
-   **热插拔总线错误**
    -   连接设备后，卸载并加载设备堆栈 (例如， [USB 驱动程序堆栈](/windows-hardware/drivers/ddi/index)) 。 卸载堆栈之前、期间和之后发送打印作业。 例如，在连接 USB 设备的情况下，卸载设备连接到的 USB 根集线器或主机控制器。
    -   测试卸载并加载具有和不包含打印作业的设备堆栈。 验证是否可以取消、恢复和重新启动该作业。
    -   重载设备堆栈以允许打印作业正常恢复。

 

