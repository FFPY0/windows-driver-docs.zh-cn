---
title: 分配方案
description: 分配方案
keywords:
- 分配选项 WDK 内核流式处理
ms.date: 04/20/2017
ms.localizationpriority: medium
ms.openlocfilehash: bf3071efed76d6eb8a7b4a4bf8eb3621e31deb77
ms.sourcegitcommit: 418e6617e2a695c9cb4b37b5b60e264760858acd
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/07/2020
ms.locfileid: "96834025"
---
# <a name="allocation-schemes"></a>分配方案





下图表示分配用于三个筛选器的单个分配器。 不需要在转换或接收器筛选器中进行分配，因为系统尚未向这些筛选器分配分配器句柄。

![阐释简单分配器配置的关系图](images/ksart-10.png)

源筛选器分配一个帧，并用数据填充该帧，并将其提交到下一个筛选器。 转换筛选器执行就地数据转换，并将帧提交到下一个筛选器。 当接收器筛选器完成 i/o 操作时，源筛选器将释放或重用该框架。 流控制在此筛选器关系图中由可从接收器分配器分配的未完成帧数和 i/o 操作的完成速率进行维护。

下图表示一个分配器配置，其中源帧路由到多个目标接收器。

![说明具有多个接收器的分配器配置的关系图](images/ksart-11.png)

在关系图中，文件编写器可以表示从波形输出到文件，以及将音频发送到的设备的声卡。

此筛选器图包含两个分配器：转换的分配器和设备的分配器。 源筛选器从转换分配器中分配一个帧，使用数据填充该帧，并将其提交到转换筛选器，然后提交到文件编写器。 收到帧后，转换筛选器将从设备分配器中分配一个帧，执行将数据转换为新帧，并将此帧提交到设备。

流控制在此筛选器关系图中按可从分配器分配的未完成帧数和 i/o 操作数完成速率进行维护。 请注意，对于通过连接端口创建的源/接收器分段的每个单独列表，必须有单独的分配器。 如果不存在单独的分配器，则给定段可能会占用所有可用的帧，而不会为下一个段留出任何内容，这可能需要一个或多个帧来处理前一段创建的数据。

 

 




